// Â© 2022 SolarWinds Worldwide, LLC. All rights reserved.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
//  of this software and associated documentation files (the "Software"), to
//  deal in the Software without restriction, including without limitation the
//  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
//  sell copies of the Software, and to permit persons to whom the Software is
//  furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
//  all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
//  THE SOFTWARE.

import { transformStandardize } from "./transformer-standardize";
import { mockTimeSeriesData } from "./transformer.spec";

describe("TransformerStandardize", () => {
    it("should apply standardization to time series data", () => {
        const expectedTransformedDataY = [
            6.034190042100102, -0.005933968592652635, 5.733615150572738,
            0.008379121480079023, -0.9291282782838438, 1.1963655975168057,
            -0.020247058665384295, -0.8146235577019907, 0.47355454884385745,
            -1.0722591790111602, -0.27788267997455396, -0.8718759179929172,
            -0.6786492020110401, -0.5784575715019185, -0.5641444814291868,
            -1.122354994265721, 1.0961739670076842, 1.0675477868622207,
            1.3180268631350247, 1.511253579116902, -1.122354994265721,
            -1.122354994265721, -1.122354994265721, -0.9005020981383804,
            0.23738856264378524, -0.32797849522911465, -1.122354994265721,
            -1.122354994265721, 0.47355454884385745, -0.5498313913564552,
            -0.5140486661746261, 0.0012225764437131944, -0.9005020981383804,
            0.14435347717102961, -0.22063031968362734, -0.6213968417201134,
            -1.0651026339747944, 0.8242252556257829, -1.122354994265721,
            0.12288384206193213, -0.24209995479272484, -0.9219717332474779,
            -1.0579460889384287, -1.122354994265721, -0.013090513629018464,
            -0.26356958990182233, -0.8933455531020147, -0.17769104946543238,
            -0.23494340975635902, 0.18013620235285877, -1.122354994265721,
            -0.9362848233202097, 0.3876760084074675, 0.6238419946075398,
            0.8814776159167093, -0.46395285092006533, 0.5379634541711498,
            -0.8217801027383566, 1.0317650616803915, 0.609528904534808,
            0.8671645258439775, 1.2750875929168297, -0.9434413683565754,
            1.0102954265712942, -1.0293199087929654, -0.13475177924723755,
            0.9244168861349042, 1.6830106599896815, 0.659624719789369,
            0.47355454884385745, -1.122354994265721, -0.7502146523746982,
            -1.122354994265721, -1.122354994265721, 1.303713773062293,
            1.0747043318985865, 0.9959823364985625, 0.7168770800802953,
            -0.6858057470474058, -0.14906486931996907, 1.303713773062293,
            -0.32797849522911465, -0.27072613493818815, 0.2946409229347119,
            0.1658231122801271, 0.8099121655530512, 0.2803278328619802,
            -1.122354994265721, -0.6142402966837477, 0.8099121655530512,
            -0.6500230218655767, 0.9601996113167335, -0.9434413683565754,
            0.8671645258439775, -0.48542248602916277, 0.9458865212440019,
            -1.122354994265721, 0.9888257914621968, 0.9530430662803675,
            -0.9505979133929413, -0.9720675485020388, -0.14190832428360323,
            0.781285985407588, -0.9649110034656729, 0.5379634541711498,
            -0.521205211210992, 0.2660147427892486, -0.08465596399267676,
            0.609528904534808, 1.0317650616803915, 1.4540012188259752,
            -0.7573711974110641, -0.7001188371201376, -1.0293199087929654,
            -1.122354994265721, 1.217835232625903, 1.210678687589537,
            -0.8360931928110882, 1.5327232142259992, -0.35660467537457796,
            -0.49257903106552864, 0.9387299762076359, 0.022692211552810683,
            -1.122354994265721, -0.3422915853018463, -0.6213968417201134,
            0.1658231122801271, -0.7716842874837957, 0.7955990754803196,
            0.5379634541711498, 1.425375038680512, -1.122354994265721,
            0.9244168861349042, -0.8432497378474538, -0.9005020981383804,
            -0.9935371836111363, -1.122354994265721, -1.122354994265721,
            0.1658231122801271, -0.9720675485020388, 1.1104870570804157,
            1.1534263272986107, 1.547036304298731, -0.5713010264655527,
            0.022692211552810683, 0.8456948907348802, 0.731190170153027,
            0.21591892753468792, 1.461157763862341, 0.9101037960621725,
            -1.122354994265721, -0.6786492020110401, 0.8886341609530752,
            -0.49973557610189445, -1.0150068187202337, -0.7573711974110641,
            0.4950241839529548, 0.4520849137347601, 0.6023723594984424,
            -0.6714926569746742, -0.03456014873811595, -1.0006937286475022,
            0.738346715189393, -0.5713010264655527, 1.0246085166440257,
            -0.37807431048367546, 1.468314308898707, -1.122354994265721,
            1.0317650616803915, -0.5498313913564552, -1.122354994265721,
            -1.122354994265721, 0.616685449571174, -0.22778686471999318,
            0.5308069091347841, -1.122354994265721, -0.027403603701750122,
            0.4663980038074918, -0.9362848233202097, 0.5809027243893448,
            -1.122354994265721, 0.573746179352979, -1.122354994265721,
            0.6381550846802714, -1.122354994265721, -0.32797849522911465,
            0.5522765442438814, 0.5451199992075157, 0.9244168861349042,
            0.12288384206193213, -1.122354994265721, 1.2249917776622687,
            -0.7072753821565033, 0.07994457184373716, -0.6357099317928451,
            0.0656314817710055, 0.5093372740256864, 0.652468174753003,
            0.015535666516444852, -0.6786492020110401, 0.4950241839529548,
            0.6453116297166374, -0.7144319271928692, 1.425375038680512,
            -1.122354994265721, 1.2679310478804637, -0.3637612204109438,
            0.8957907059894409, -0.005933968592652635, 0.8313818006621486,
            -0.721588472229235, -0.8575628279201856, 1.253617957807732,
            -0.9577544584293072, 1.4540012188259752, -0.9148151882111122,
            -1.122354994265721, 0.7955990754803196, -0.9577544584293072,
            -0.15622141435633488, 0.9745127013894652, -0.04171669377448178,
            0.738346715189393, 0.37336291833473584, -0.5713010264655527,
            -1.122354994265721, 0.23738856264378524, -0.879032463029283,
            1.6686975699169497, -0.5498313913564552, -0.7645277424474299,
            -1.0579460889384287, -0.8360931928110882, 0.33042364811654085,
            0.8027556205166853, 0.6810943548984664, -0.6571795669019426,
            0.015535666516444852, -0.7931539225928932, -1.122354994265721,
        ];
        const actualTransformedDataY = transformStandardize(
            mockTimeSeriesData,
            false
        ).map((d) => d.y);
        expect(actualTransformedDataY).toEqual(expectedTransformedDataY);
    });
});
