<ng-template #showOptional>
    <span *ngIf="showOptionalText" class="nui-form-field__state-text" i18n
        >(optional)</span
    >
</ng-template>

<div class="nui-form-field" [ngStyle]="{ width: getWidth() }">
    <div class="nui-form-field__control-label-container" *ngIf="caption">
        <div class="nui-form-field__control-label-container-description">
            <label class="nui-form-field__control-label">{{ caption }}</label>
            <span
                *ngIf="controlIsOptional"
                class="nui-form-field__state-text"
                i18n
                >(optional)</span
            >
        </div>
        <div
            *ngIf="info || infoTemplate"
            class="nui-form-field__control-label-container-info"
        >
            <nui-popover
                [template]="infoTemplatePlain"
                class="d-inline-flex"
                [unlimited]="true"
            >
                <nui-icon [icon]="'severity_info'"></nui-icon>
            </nui-popover>
        </div>
    </div>
    <ng-content></ng-content>
    <div class="nui-form-field__help">
        <div>
            <ng-content select="nui-validation-message"> </ng-content>
        </div>
        <span class="nui-help-hint" *ngIf="hint || hintTemplate">
            <ng-container *ngIf="hint && !hintTemplate">{{
                hint
            }}</ng-container>
            <ng-container
                *ngIf="hintTemplate && !hint"
                [ngTemplateOutlet]="hintTemplate"
            ></ng-container>
        </span>
    </div>
</div>

<ng-template #infoTemplatePlain>
    <ng-container *ngIf="info; else infoTemplate">
        {{ info }}
    </ng-container>
</ng-template>
