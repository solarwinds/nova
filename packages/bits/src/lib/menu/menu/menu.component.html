<nui-popup
    [class.nui-menu--compact]="isMenuCompact()"
    (opened)="onMenuOpen()"
    [appendToBody]="appendToBody"
    [width]="widthOfPopup"
    [contextClass]="contextClass + ' nui-menu-popup-host'"
>
    <button
        #menuToggle
        nui-button
        nuiPopupToggle
        [disabled]="isDisabled"
        [toggleOnKey]="false"
        aria-haspopup="true"
        [attr.aria-expanded]="popup?.isOpen || false"
        [attr.aria-controls]="popup?.isOpen ? menuTriggerId : null"
        type="button"
        (blur)="onBlur($event)"
        [displayStyle]="displayStyle"
        [size]="size"
        [icon]="icon"
        [iconRight]="isTitlePresent()"
        class="menu-button no-shadow"
        [isEmpty]="!isTitlePresent()"
    >
        <span>{{ title }}</span>
    </button>
    <div popupAreaContent [id]="menuTriggerId">
        <nui-menu-popup
            *ngIf="itemsSource"
            [itemsSource]="itemsSource"
            [size]="size"
        ></nui-menu-popup>
        <ng-content *ngIf="!itemsSource"></ng-content>
    </div>
</nui-popup>
