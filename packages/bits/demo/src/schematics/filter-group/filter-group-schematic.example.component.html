<nui-schematic-docs-page schematicFolderName="filter-group">
    <nui-tab-group schematicExamples>
        <nui-tab heading="Basic usage">
            <h2>Basic Usage</h2>
            <p>
                Filter group depends heavily on the
                <a
                    target="_blank"
                    href="../injectables/ClientSideDataSource.html"
                    ><code>ClientSideDataSource</code></a
                >
                service, so first and foremost please check out the
                documentation for
                <a
                    target="_blank"
                    href="../injectables/ClientSideDataSource.html"
                    ><code>ClientSideDataSource</code></a
                >.
            </p>
            <p>
                This example contains all the files generated by the CLI
                command. The schematic will output a feature module, a filter
                group composite and helper components:
                <code>filter-groups-wrapper</code>,
                <code>filter-group-dialog</code> and <code>item-picker</code>.
                Except for the wrapper, usage of these components may not be
                required by your implementation.
            </p>
            <p>
                Once you have scaffolded your filter group, follow these steps
                to add it to your application:
            </p>
            <ol>
                <li>
                    In your template, place your composite(s) inside the wrapper
                    component. The wrapper will register your composites with
                    <a
                        target="_blank"
                        href="../injectables/ClientSideDataSource.html"
                        ><code>ClientSideDataSource</code></a
                    >
                    as well as hide and display a popover over filter groups
                    with no existing values.
                </li>
                <li>
                    Pass an
                    <a
                        target="_blank"
                        href="../interfaces/IFilterGroupItem.html"
                        ><code>IFilterGroupItem</code></a
                    >
                    object to each <code>[filterGroupItem]</code> input.
                </li>
                <li>
                    To receive new filtering state
                    (<code>IFilteringOutputs</code>), bind to the
                    <code>(filterChanged)</code> output and invoke the
                    <code>applyFilters</code> method of
                    <a
                        target="_blank"
                        href="../../../../../../nova-bits/develop/sdk/api-docs-ng2/injectables/ClientSideDataSource.html"
                    >
                        <code>ClientSideDataSource</code>.
                    </a>
                </li>
            </ol>
            <p>
                <b>Note:</b> If you provide a value for the count property in
                <a target="_blank" href="../interfaces/IFilterGroupOption.html"
                    ><code>IFilterGroupOption</code></a
                >, counts will be added to the checkbox template. To recalculate
                counts, you must implement a
                <code>recalculateCounts</code> method and call it upon receiving
                filteringState <code>IFilteringOutputs</code>.
            </p>

            <nui-schematic-docs-command
                >ng g @nova-ui/bits:filter-group --name=basic-filter-group
                --p=app</nui-schematic-docs-command
            >
            <nui-schematic-docs-example exampleFolderName="basic-filter-group">
                <app-basic-filter-group-composite-example></app-basic-filter-group-composite-example>
            </nui-schematic-docs-example>
        </nui-tab>

        <nui-tab heading="Custom template">
            <h2>Custom Component Templates</h2>
            <p>
                To use a custom <strong>checkbox</strong> or
                <strong>expander </strong> <code>ng-template</code>, use the
                <code>[checkboxTemplateRef]</code> or
                <code>[expanderTemplateRef]</code> input of the filter group.
            </p>
            <p>
                To pre-select filters, define
                <code>selectedFilterValues</code> for your
                <a target="_blank" href="../interfaces/IFilterGroupItem.html"
                    ><code>IFilterGroupItem</code></a
                >
                objects.
            </p>
            <nui-schematic-docs-command
                >ng g @nova-ui/bits:filter-group
                --name=custom-template-filter-group --p=app
                <span appendedText
                    >with some manual adjustments that can be seen below</span
                >
            </nui-schematic-docs-command>
            <nui-schematic-docs-example
                exampleFolderName="custom-template-filter-group"
            >
                <app-custom-template-filter-group-composite-example></app-custom-template-filter-group-composite-example>
            </nui-schematic-docs-example>
        </nui-tab>

        <nui-tab heading="Custom data source">
            <h2>Custom Data Source</h2>
            <p>To use Filter Group with a custom data source:</p>
            <ol>
                <li>
                    Create a custom data source service that extends
                    <code>DataSourceService</code> and implements a method
                    called <code>getFilteredData</code>. This method will
                    communicate with an HTTP service to fetch filtered data and
                    emit it back to the filter group.
                </li>
                <li>
                    Get a reference to your filter groups via
                    <code>ViewChildren</code> and subscribe to their changes. In
                    the callback, register components in your custom data
                    service using the <code>registerComponent</code> method
                    of<code>DataSourceService</code>.
                </li>
                <li>
                    On filter change, have the custom data source service emit
                    filters (<code>IFilters</code>) to the http service and
                    receive a filtered data object
                    (<code>ICustomDSFilteredData</code>) in return. The filtered
                    data object consists of filterGroupItems
                    (<code>IFilterGroupItem[]</code>) and filteringState
                    (<code>IFilteringOutputs</code>).
                </li>
            </ol>
            <p>
                As implementations of the custom data source service may vary,
                other data may be passed from the filter group to the custom
                data source in order for the custom data source to apply filters
                and return filtered data.
            </p>

            <nui-schematic-docs-command
                >ng g @nova-ui/bits:filter-group
                --name=custom-data-source-filter-group --p=app
                <span appendedText
                    >with some manual adjustments that can be seen below</span
                >
            </nui-schematic-docs-command>
            <nui-schematic-docs-example
                exampleFolderName="custom-data-source-filter-group"
            >
                <app-custom-data-source-filter-group-composite-example></app-custom-data-source-filter-group-composite-example>
                <nui-fake-filtering-datasource-backend-component></nui-fake-filtering-datasource-backend-component>
            </nui-schematic-docs-example>
        </nui-tab>

        <nui-tab heading="Collapse / Dialog">
            <h2>Handle Multiple Filter Group Options</h2>
            <p>
                Only 10 filter group options are displayed by default. You can
                change this number by setting the
                <code>itemsToDisplay</code> property of an
                <a target="_blank" href="../interfaces/IFilterGroupItem.html"
                    ><code>IFilterGroupItem</code></a
                >.
            </p>
            <p>
                The remaining options will be replaced with a
                <strong>Show all</strong> button bound to the
                <code>(showAllButtonClicked)</code> output. To display the
                hidden options, you can use the
                <code>FilterGroupCompositeDialogComponent</code> generated by
                the schematic:
            </p>
            <ol>
                <li>
                    Implement an item picker and place it in the dialog
                    template. The example below uses a simple selectable list -
                    to add more functionality, such as sorting and pagination,
                    refer to the
                    <a
                        target="_blank"
                        href="../additional-documentation/schematics/list.html"
                        >list schematic docs</a
                    >.
                </li>
                <li>
                    Add your dialog component to your module's
                    <code>entryComponents</code>.
                </li>
                <li>
                    Implement a handler for the
                    <code>showAllButtonClicked</code> output. Use it to open the
                    dialog, feed it the required parameters and update selection
                    on <code>dialogClosed</code> event (refer to the
                    <code>handleFilterDialog</code> method in the example).
                </li>
            </ol>

            <nui-schematic-docs-command
                >ng g @nova-ui/bits:filter-group --name=dialog-filter-group
                --p=app
                <span appendedText
                    >with some manual adjustments that can be seen below</span
                >
            </nui-schematic-docs-command>
            <nui-schematic-docs-example exampleFolderName="dialog-filter-group">
                <app-dialog-filter-group-composite-example></app-dialog-filter-group-composite-example>
            </nui-schematic-docs-example>
        </nui-tab>
    </nui-tab-group>
</nui-schematic-docs-page>
